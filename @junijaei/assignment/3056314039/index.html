<div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_7th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">7기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_7th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_7th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_7th/@junijaei/" data-discover="true">junijaei<!-- --> 님의 상세페이지</a> ＞ <!-- -->[2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_7th_chapter3-2/pull/7" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->junijaei</span><span>2025.11.30</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="배포-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포 링크</h2>
<p><a href="https://junijaei.github.io/front_7th_chapter3-2/">Advanced 과제 배포 링크</a></p>
<h2 id="과제의-핵심취지"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제의-핵심취지"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제의 핵심취지</h2>
<ul>
<li>React의 hook 이해하기</li>
<li>함수형 프로그래밍에 대한 이해</li>
<li>액션과 순수함수의 분리</li>
</ul>
<h2 id="과제에서-꼭-알아가길-바라는-점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제에서-꼭-알아가길-바라는-점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제에서 꼭 알아가길 바라는 점</h2>
<ul>
<li>엔티티를 다루는 상태와 그렇지 않은 상태 - cart, isCartFull vs isShowPopup</li>
<li>엔티티를 다루는 컴포넌트와 훅 - CartItemView, useCart(), useProduct()</li>
<li>엔티티를 다루지 않는 컴포넌트와 훅 - Button, useRoute, useEvent 등</li>
<li>엔티티를 다루는 함수와 그렇지 않은 함수 - calculateCartTotal(cart) vs capaitalize(str)</li>
</ul>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li>Component에서 비즈니스 로직을 분리하기</li>
<li>비즈니스 로직에서 특정 엔티티만 다루는 계산을 분리하기</li>
<li>뷰데이터와 엔티티데이터의 분리에 대한 이해</li>
<li>entities -&gt; features -&gt; UI 계층에 대한 이해</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  계산함수는 순수함수로 작성이 되었나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  계산함수는 순수함수로 작성이 되었나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  특정 Entitiy만 다루는 함수는 분리되어 있나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  특정 Entitiy만 다루는 Component와 UI를 다루는 Component는 분리되어 있나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  데이터 흐름에 맞는 계층구조를 이루고 의존성이 맞게 작성이 되었나요?</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li>이번 심화과제는 Context나 Jotai를 사용해서 Props drilling을 없애는 것입니다.</li>
<li>어떤 props는 남겨야 하는지, 어떤 props는 제거해야 하는지에 대한 기준을 세워보세요.</li>
<li>Context나 Jotai를 사용하여 상태를 관리하는 방법을 익히고, 이를 통해 컴포넌트 간의 데이터 전달을 효율적으로 처리할 수 있습니다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  Context나 Jotai를 사용해서 전역상태관리를 구축했나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  전역상태관리를 통해 domain custom hook을 적절하게 리팩토링 했나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  도메인 컴포넌트에 도메인 props는 남기고 props drilling을 유발하는 불필요한 props는 잘 제거했나요?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/>  전체적으로 분리와 재조립이 더 수월해진 결합도가 낮아진 코드가 되었나요?</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<p>이번 과제에서는 AI 사용을 최소화하고, 스스로의 힘으로 설계를 고민하는 데 집중했다.
1주차를 제외하면 가장 AI 의존도가 낮았던 과제라고 생각한다.
덕분에 결과물의 퀄리티가 완벽하지 않을 수는 있어도, 기술적인 의사결정 하나하나에 대해 오랫동안 고민해 보면서 답을 찾는 과정을 거칠 수 있었다.</p>
<hr/>
<h2 id="기술적-고민과-해결-과정"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기술적-고민과-해결-과정"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기술적 고민과 해결 과정</h2>
<h2 id="1-함수형-프로그래밍과-관심사의-분리-hooks-vs-models"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-함수형-프로그래밍과-관심사의-분리-hooks-vs-models"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 함수형 프로그래밍과 관심사의 분리 (Hooks vs Models)</h2>
<p>처음에는 단순히 <code>hooks</code>로 로직을 분리하는 것만 생각했지, <code>models</code>라는 개념을 도입해 비즈니스 로직을 순수 함수로 분리하는 것은 처음 시도해 보았다.
초기에는 &quot;왜 굳이 이렇게까지 나눠야 하지?&quot;라는 의문이 들었으나, 과제를 진행하며 그 이유를 직접 깨달을 수 있었다.</p>
<ul>
<li><strong>Model</strong>: 비즈니스 로직만이 존재하는 순수 함수. (함수형 프로그래밍 언어에 따르면 <code>계산</code>에 해당한다.)</li>
<li><strong>Hook</strong>: 비즈니스 로직과 상태 관리, 그리고 부수 효과를 다루는 곳. (함수형 프로그래밍 언어에 따르면 <code>액션</code>에 해당한다.)</li>
<li>(번외) Utils: 비즈니스 로직을 다루지 않는 순수 함수. (어느 프로젝트에서든 사용할 수 있음.)</li>
</ul>
<p>순수 함수란 동일한 입력(A)에 대해 항상 동일한 출력(B)을 반환하는 멱등성을 가지며, 외부 상태를 변경하지 않는 함수다.
<code>cart/models</code>의 <code>getMaxApplicableDiscount</code> 같은 함수들이 그 예시다.
이 함수는 오직 전체 <code>cart</code> 배열과 <code>cart</code> 객체만을 입력받아 최대 할인 가격에 대한 결과를 반환할 뿐, 외부의 어떤 상태도 건드리지 않는다.</p>
<p>이러한 분리를 통해 얻은 이점은 다음과 같았다.</p>
<ol>
<li><strong>예측 가능성</strong>: 입력값만 확인하면 결과가 보장되므로 디버깅이 훨씬 수월해졌다. 결과가 이상하면 로직이 틀렸거나 매개변수가 잘못된 것 둘 중 하나뿐이다. 다른 로직의 영향을 받진 않았을지 걱정할 필요가 없었다.</li>
<li><strong>테스트 용이성</strong>: 내부 변수나 전역 상태를 mocking할 필요 없이, 단순히 매개변수만 넣어주면 테스트가 가능하다. 액션은 실행 시점이나 횟수에 따라 결과가 달라져 테스트가 까다롭지만, 계산은 언제나 검증 가능하다.</li>
<li><strong>재사용성</strong>: 특정 컴포넌트나 훅에 종속되지 않아 독립적으로 재사용하기 쉬웠다.</li>
</ol>
<p>작업을 하다 보니 <code>models</code> 파일 하나가 너무 비대해지는 경향이 있어, <code>calculator</code>, <code>validator</code>, <code>updater</code> 등으로 임의로 분리해보았다.
이것이 정석적인 방법인지는 확신이 서지 않지만, 역할별로 코드가 묶이니 관리가 더 편해졌다.</p>
<h2 id="2-디렉토리-구조-설계"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-디렉토리-구조-설계"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 디렉토리 구조 설계</h2>
<p>초기에는 <code>components</code>, <code>hooks</code>, <code>models</code> 등 역할(Role) 중심으로 디렉토리를 나누었다. 가장 익숙한 방식이기도 했다.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line">src
</span><span class="code-line">	components
</span><span class="code-line">	constants
</span><span class="code-line">	hooks
</span><span class="code-line">	models
</span><span class="code-line">	utils
</span></code><div class="copied" data-code="src
	components
	constants
	hooks
	models
	utils
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>하지만 기능이 복잡해지면서 문제에 봉착했다.</p>
<pre><code class="code-highlight"><span class="code-line">src
</span><span class="code-line">	components
</span><span class="code-line">		cart
</span><span class="code-line">			Cart.tsx🟡
</span><span class="code-line">			CartItem.tsx🟡
</span><span class="code-line">		coupon
</span><span class="code-line">			CouponForm.tsx🟢
</span><span class="code-line">		product
</span><span class="code-line">			ProductList.tsx🔵
</span><span class="code-line">			ProductItem.tsx🔵
</span><span class="code-line">	hooks
</span><span class="code-line">		cart
</span><span class="code-line">			useCart.ts🟡
</span><span class="code-line">		coupon
</span><span class="code-line">			useCoupons.ts🟢
</span><span class="code-line">			useCouponForm.ts🟢
</span><span class="code-line">		product
</span><span class="code-line">			useProducts.ts🔵
</span><span class="code-line">			useProductForm.ts🔵
</span><span class="code-line">	models
</span><span class="code-line">		cart
</span><span class="code-line">			validator.ts🟡
</span><span class="code-line">			calculator.ts🟡
</span><span class="code-line">		coupon
</span><span class="code-line">			validator.ts🟢
</span><span class="code-line">		product
</span><span class="code-line">			validator.ts🔵
</span></code><div class="copied" data-code="src
	components
		cart
			Cart.tsx🟡
			CartItem.tsx🟡
		coupon
			CouponForm.tsx🟢
		product
			ProductList.tsx🔵
			ProductItem.tsx🔵
	hooks
		cart
			useCart.ts🟡
		coupon
			useCoupons.ts🟢
			useCouponForm.ts🟢
		product
			useProducts.ts🔵
			useProductForm.ts🔵
	models
		cart
			validator.ts🟡
			calculator.ts🟡
		coupon
			validator.ts🟢
		product
			validator.ts🔵
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>cart, product, coupon과 같은 entity는 각각 서로 연관되어 하나의 흐름을 가지고 있는 경우가 많은데, 모든 로직이 산재되어 있었다.
하나의 기능을 수정하려면 <code>ui</code>, <code>hooks</code>, <code>models</code>가 흩어져 있는 여러 디렉토리를 오가야 했고, 코드의 흐름이 한눈에 들어오지 않았다.</p>
<p>UI를 그리기 위해 Hook이 필요하고, Hook은 Model을 필요로 하는 의존성 흐름(UI -&gt; Hook -&gt; Model)을 따라가기가 너무 벅찼다.
그래서 엔티티(Entity) 기준으로 코드를 묶는 방식, 즉 FSD(Feature-Sliced Design)에 관심을 갖게 되었다.</p>
<p>완벽한 정석 FSD는 아니지만, <code>features</code>, <code>shared</code>, <code>pages</code> 등으로 계층을 나누고 도메인별로 응집도를 높이는 방식을 차용했다.</p>
<pre><code class="code-highlight"><span class="code-line">src
</span><span class="code-line">	features
</span><span class="code-line">		cart
</span><span class="code-line">			hooks
</span><span class="code-line">				useCart.ts🟡
</span><span class="code-line">			models
</span><span class="code-line">				validator.ts🟡
</span><span class="code-line">				calculator.ts🟡
</span><span class="code-line">				index.ts
</span><span class="code-line">			ui
</span><span class="code-line">				Cart.tsx🟡
</span><span class="code-line">				CartItem.tsx🟡
</span><span class="code-line">		coupon
</span><span class="code-line">			hooks
</span><span class="code-line">				useCoupon.ts🟢
</span><span class="code-line">				useCouponForm.ts🟢
</span><span class="code-line">			models
</span><span class="code-line">				validator.ts🟢
</span><span class="code-line">				index.ts
</span><span class="code-line">			ui
</span><span class="code-line">				CouponForm.tsx🟢
</span><span class="code-line">		product
</span><span class="code-line">			hooks
</span><span class="code-line">				useProducts.ts🔵
</span><span class="code-line">				useProductForm.ts🔵
</span><span class="code-line">			models
</span><span class="code-line">				validator.ts🔵
</span><span class="code-line">				index.ts
</span><span class="code-line">			ui
</span><span class="code-line">				ProductForm.tsx🔵
</span><span class="code-line">				ProductList.tsx🔵
</span><span class="code-line">				ProductItem.tsx🔵
</span></code><div class="copied" data-code="src
	features
		cart
			hooks
				useCart.ts🟡
			models
				validator.ts🟡
				calculator.ts🟡
				index.ts
			ui
				Cart.tsx🟡
				CartItem.tsx🟡
		coupon
			hooks
				useCoupon.ts🟢
				useCouponForm.ts🟢
			models
				validator.ts🟢
				index.ts
			ui
				CouponForm.tsx🟢
		product
			hooks
				useProducts.ts🔵
				useProductForm.ts🔵
			models
				validator.ts🔵
				index.ts
			ui
				ProductForm.tsx🔵
				ProductList.tsx🔵
				ProductItem.tsx🔵
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이 구조로 변경한 후, 관련 로직이 한곳에 모여 있어 코드 파악이 훨씬 빨라졌고, 실수할 확률도 눈에 띄게 줄어들었다.
또, Barrel Export를 적극 활용하여 외부에서 불필요한 내부 로직에 접근하는 것을 막고 import 문을 깔끔하게 유지하려 노력했다.</p>
<h2 id="3-validation-설계"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-validation-설계"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Validation 설계</h2>
<p>Form Validation을 구현하며 &quot;확장성&quot;, &quot;수정 용이성&quot;, &quot;선언적 처리&quot;를 목표로 여러 시도를 했다.</p>
<h3 id="1단계-react-hook-form-rhf-시도"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1단계-react-hook-form-rhf-시도"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>1단계: React Hook Form (RHF) 시도</strong></h3>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line">discountValue<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  required<span class="token operator">:</span> <span class="token string">&#x27;할인 값을 입력하세요&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">ChangeEvent</span><span class="token operator">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> cleaned <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token char-class-negation operator">^</span><span class="token special-escape escape">\\</span>d<span class="token char-class-punctuation punctuation">]</span></span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&#x27;discountValue&#x27;</span><span class="token punctuation">,</span> <span class="token operator">!</span>cleaned <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>cleaned<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  validate<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function-variable function">positive</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> value <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token string">&#x27;0 이상이어야 합니다&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">maxPercentage</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>discountType <span class="token operator">===</span> <span class="token string">&#x27;percentage&#x27;</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&#x27;할인율은 100%를 초과할 수 없습니다&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&#x27;discountValue&#x27;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token function">addNotification</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">return</span> message<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">maxAmount</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>discountType <span class="token operator">===</span> <span class="token string">&#x27;amount&#x27;</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&gt;</span> <span class="token number">100000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&#x27;할인 금액은 100,000원을 초과할 수 없습니다&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&#x27;discountValue&#x27;</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token function">addNotification</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">return</span> message<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></code><div class="copied" data-code="discountValue: {
  required: &#x27;할인 값을 입력하세요&#x27;,
  onChange: (e: ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const cleaned = e.target.value.replace(/[^\\d]/g, &#x27;&#x27;);
    setValue(&#x27;discountValue&#x27;, !cleaned ? 0 : parseInt(cleaned));
  },
  validate: {
    positive: (value: number) =&gt; value &gt;= 0 || &#x27;0 이상이어야 합니다&#x27;,
    maxPercentage: (value: number) =&gt; {
      if (discountType === &#x27;percentage&#x27; &amp;&amp; value &gt; 100) {
        const message = &#x27;할인율은 100%를 초과할 수 없습니다&#x27;;
        setValue(&#x27;discountValue&#x27;, 100);
        addNotification(message, &#x27;error&#x27;);
        return message;
      }
      return true;
    },
    maxAmount: (value: number) =&gt; {
      if (discountType === &#x27;amount&#x27; &amp;&amp; value &gt; 100000) {
        const message = &#x27;할인 금액은 100,000원을 초과할 수 없습니다&#x27;;
        setValue(&#x27;discountValue&#x27;, 100000);
        addNotification(message, &#x27;error&#x27;);
        return message;
      }
      return true;
    },
  },
},
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>처음에는 RHF를 도입해 보았다. (그냥 Form이니까..)
하지만 요구사항이 복잡했다. (숫자가 아니면 입력 거부, 유효하지 않은 값이면 알림 표시 및 값 보정 등)
이를 RHF로 구현하려니 <code>setValue</code>를 수동으로 호출해야 했고, RHF의 장점인 자동화된 상태 관리를 거의 활용하지 못했다.
배보다 배꼽이 더 큰 상황이라 판단하여 과감히 제거했다.</p>
<h3 id="2단계-model로-로직-이동-및-순수-함수화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2단계-model로-로직-이동-및-순수-함수화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>2단계: Model로 로직 이동 및 순수 함수화</strong></h3>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// cart/models/validator.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> validateAddCoupon <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  coupons<span class="token operator">:</span> <span class="token maybe-class-name">Coupon</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  newCoupon<span class="token operator">:</span> <span class="token maybe-class-name">Coupon</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">CouponValidation</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 중복 체크</span>
</span><span class="code-line">  <span class="token keyword">const</span> existingCoupon <span class="token operator">=</span> <span class="token function">findCouponByCode</span><span class="token punctuation">(</span>coupons<span class="token punctuation">,</span> newCoupon<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>existingCoupon<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">      valid<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">      error<span class="token operator">:</span> <span class="token string">&#x27;DUPLICATED&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      message<span class="token operator">:</span> <span class="token string">&#x27;이미 존재하는 쿠폰 코드입니다.&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 할인값 검증</span>
</span><span class="code-line">  <span class="token keyword">const</span> discountValidation <span class="token operator">=</span> <span class="token function">validateCouponDiscount</span><span class="token punctuation">(</span>
</span><span class="code-line">    newCoupon<span class="token punctuation">.</span><span class="token property-access">discountType</span><span class="token punctuation">,</span>
</span><span class="code-line">    newCoupon<span class="token punctuation">.</span><span class="token property-access">discountValue</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>discountValidation<span class="token punctuation">.</span><span class="token property-access">valid</span><span class="token punctuation">)</span> <span class="token keyword">return</span> discountValidation<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> valid<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&#x27;쿠폰이 추가되었습니다.&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// cart/models/validator.ts
export const validateAddCoupon = (
  coupons: Coupon[],
  newCoupon: Coupon
): CouponValidation =&gt; {
  // 중복 체크
  const existingCoupon = findCouponByCode(coupons, newCoupon.code);
  if (existingCoupon)
    return {
      valid: false,
      error: &#x27;DUPLICATED&#x27;,
      message: &#x27;이미 존재하는 쿠폰 코드입니다.&#x27;,
    };

  // 할인값 검증
  const discountValidation = validateCouponDiscount(
    newCoupon.discountType,
    newCoupon.discountValue
  );
  if (!discountValidation.valid) return discountValidation;

  return { valid: true, error: null, message: &#x27;쿠폰이 추가되었습니다.&#x27; };
};

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>Validation 로직은 &quot;입력에 대한 검증 결과 반환&quot;이라는 명확한 책임을 가진 순수 함수여야 한다고 판단했다.
그래서 <code>models/cart/validator.ts</code>와 같이 별도의 파일로 분리했다.
Validator는 &quot;검증 결과&quot;만 반환하고, &quot;알림을 띄울지 말지&quot;는 UI나 Hook이 결정하도록 책임을 위임했다.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// shared/types/index.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Validation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token punctuation">{</span> valid<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span> error<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token punctuation">{</span> valid<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> error<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// shared/types/index.ts
export type Validation&lt;T&gt; =
  | { valid: true; error: null; message: string }
  | { valid: false; error: T; message: string };
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// coupons.types.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CouponValidationError</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token string">&#x27;DUPLICATED&#x27;</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token string">&#x27;NOT_FOUND&#x27;</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token string">&#x27;INVALID_DISCOUNT&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CouponValidation</span> <span class="token operator">=</span> <span class="token maybe-class-name">Validation</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">CouponValidationError</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// coupons.types.ts
export type CouponValidationError =
  | &#x27;DUPLICATED&#x27;
  | &#x27;NOT_FOUND&#x27;
  | &#x27;INVALID_DISCOUNT&#x27;;
export type CouponValidation = Validation&lt;CouponValidationError&gt;;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>또한, 타입 안정성을 위해 <code>Validation&lt;T&gt;</code> 타입을 정의하여
<code>{ valid: boolean, error: T, message: string }</code> 형태의 일관된 반환값을 갖도록 설계했다.</p>
<h3 id="3단계-onsuccess--onerror-패턴-적용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3단계-onsuccess--onerror-패턴-적용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>3단계: onSuccess / onError 패턴 적용</strong></h3>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// CouponTab.tsx</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
</span></span><span class="code-line"><span class="token tag">  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token keyword">const</span> <span class="token punctuation">{</span> valid<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">removeCoupon</span><span class="token punctuation">(</span>coupon<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">	    <span class="token function">addNotification</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag"><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span></code><div class="copied" data-code="// CouponTab.tsx
&lt;button
  onClick={() =&gt; {
    const { valid, message } = removeCoupon(coupon.code);
    if (!valid)
	    addNotification(message, &#x27;error&#x27;);
  }}
&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>초기에는 UI 컴포넌트에서 valid 결과에 따라 분기 처리를 해, 해당 결과에 따른 처리를 하게끔 했다.
하지만 이렇게 작성하니, <code>valid 한지 확인 → 처리 → valid하지 않을 경우 → 다른 처리</code>의 흐름이 절차적이며, 선언적이지 못하다는 생각이 들었다.</p>
<p>최종적으로는 <code>useCouponForm</code> 훅의 <code>onSubmit</code> 함수가 <code>onSuccess</code>와 <code>onError</code> 콜백을 인자로 받도록 개선했다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// useCouponForm.ts</span>
</span><span class="code-line"><span class="token function">addCoupon</span><span class="token punctuation">(</span>form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span>validation<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    options<span class="token operator">?.</span>onSuccess<span class="token operator">?.</span><span class="token punctuation">(</span>validation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token function-variable function">onError</span><span class="token operator">:</span> <span class="token punctuation">(</span>validation<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    options<span class="token operator">?.</span>onError<span class="token operator">?.</span><span class="token punctuation">(</span>validation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// useCouponForm.ts
addCoupon(form, {
  onSuccess: (validation) =&gt; {
    reset();
    close();
    options?.onSuccess?.(validation);
  },
  onError: (validation) =&gt; {
    options?.onError?.(validation);
  },
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이로써 UI 컴포넌트는 &quot;성공했을 때 무엇을 할지&quot;, &quot;실패했을 때 무엇을 할지&quot;만 선언적으로 정의하면 되고,
내부 로직은 훅이 알아서 처리해, 각 상황에 맞게 알아서 선언해둔 로직이 실행되는 깔끔한 구조가 되었다.</p>
<h2 id="4-전역-상태-관리-prop-drilling-해결"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-전역-상태-관리-prop-drilling-해결"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. 전역 상태 관리 (Prop Drilling 해결)</h2>
<p><code>basic</code> 과제를 진행하며 가장 고통스러웠던 점은,
<code>addNotification</code> 함수를 전달하기 위해 모든 컴포넌트를 거쳐야 하는 Prop Drilling 문제였다.
하나의 알림을 띄우기 위해 무관한 중간 컴포넌트들이 props를 계속 전달해야 했다.</p>
<blockquote>
<p>초반에는 별 생각없이, props로 계속 전달하기 싫으니 싱글톤 아키텍처를 이용해 전역에서 import하는 방식을 써야지~ 했다가...
생각해보니 이게 전역 상태 관리잖아? 싶어져 전부 지웠었다 (...)</p>
</blockquote>
<p><code>advanced</code> 과제에서는 props drilling을 해결하기 위해 상태 관리 라이브러리와 Context를 사용했다.</p>
<ol>
<li>
<p>Jotai</p>
<ul>
<li>사용한 곳: Cart, Products, Coupon</li>
<li>선택 이유: 장바구니나 상품 목록처럼 빈번하게 업데이트되고, 여러 컴포넌트에서 동시다발적으로 접근해야 하는 데이터는 Context API보다 원자 단위의 상태 관리가 효율적이라 판단했다. 자주 업데이트 되는 값을 Context로 내리면 불필요한 리렌더링이 잦게 일어날 수 있었다. Jotai는 API가 직관적이어서 선택했다.</li>
<li>구현 방식: <code>src/advanced/features/{entity}/store/{entity}.atom.ts</code>에서 <code>cartAtom</code>을 정의하고, 이를 <code>use{entity}Store</code> 훅에서 <code>useAtom</code>으로 구독하여 사용했다.</li>
<li>효과: 기존에는 상위 컴포넌트에서 <code>cart</code> 상태를 관리하고 props로 내려줬다면, 이제는 <code>CartItem</code> 컴포넌트 내부에서 직접 <code>useCartStore</code>를 호출하여 필요한 데이터만 구독한다. 덕분에 중간 컴포넌트들은 데이터 전달의 책임에서 해방되었고, 결합도가 낮아졌다.</li>
</ul>
</li>
<li>
<p>Context API</p>
<ul>
<li>사용한 곳: Notification, Page</li>
<li>선택 이유: <code>Notification</code>같은 알림이나 <code>Page</code> 라우팅 같은 기능은 앱 전반에 걸쳐 &quot;주입&quot;되는 의존성 성격이 강하다고 생각했다. 또한, 상태 업데이트 빈도가 상대적으로 낮거나(Page), 전역적인 UI 오버레이(Notification)로서 동작하기 때문에 Context API가 적합하다고 판단했다.</li>
<li>구현 방식: <code>src/advanced/shared/contexts/NotificationContext.tsx</code>에서 <code>NotificationProvider</code>를 구현했다. 이 Provider는 앱의 최상위(<code>App.tsx</code>)에 위치하며, 하위 컴포넌트 어디서든 <code>useNotification</code> 훅을 통해 <code>addNotification</code> 함수에 접근할 수 있게 해준다.</li>
<li>효과: 특히 <code>usePage</code>의 <code>goPage</code> 함수 하나 때문에 모든 컴포넌트에 props를 넘기는 비효율을 제거했다. 이제는 <code>PageProvider</code>로 감싸진 하위 컴포넌트라면 어디서든 페이지 이동 로직을 호출할 수 있다.</li>
</ul>
</li>
</ol>
<hr/>
<h3 id="과제를-하면서-내가-알게된-점-좋았던-점은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-알게된-점-좋았던-점은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 알게된 점, 좋았던 점은 무엇인가요?</h3>
<p>가장 좋았던 점은 불편함을 직접 겪어보고 해결책을 찾는 과정이었다.
<code>basic</code> 과제에서 전역 상태 관리 없이 Prop Drilling의 고통을 뼈저리게 느꼈기에,
<code>advanced</code> 과제에서 Jotai와 Context API를 도입했을 때 그 편리함과 구조적 개선 효과를 확실히 체감할 수 있었다.
또한, 단순히 라이브러리를 사용하는 것을 넘어, &quot;왜 이 라이브러리를 써야 할까?&quot;, &quot;이 로직은 Hook에 있어야 하는가 Model에 있어야 하는가?&quot;, &quot;Hook과 Model, Util의 차이와 이들 사이의 구분이 필요한 이유가 뭘까?&quot;를 끊임없이 고민하며 나만의 기준을 세울 수 있었던 점이 가장 좋았다.</p>
<hr/>
<h3 id="이번-과제에서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이번-과제에서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이번 과제에서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<p>관심사의 분리가 가장 어려웠고, 그렇기에 가장 많은 공을 들였다.
단순히 코드를 나누는 것이 아니라, 순수 함수, 비즈니스 로직이 들어간 함수, UI의 책임을 명확히 정의하고 분리하려고 노력했다.
특히 Validation 로직을 순수 함수로 분리하고, UI에서 선언적으로 처리할 수 있도록 <code>onSuccess</code>/<code>onError</code> 패턴을 도입하는 과정에서 가장 많은 시행착오가 있었던 것 같다.
최종적으로는 처음보다 코드가 훨씬 읽기 쉬워지고, 유지보수하기 편한 구조가 되었다고 생각해 만족스럽다.</p>
<hr/>
<h3 id="이번-과제를-통해-앞으로-해보고-싶은게-있다면-알려주세요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이번-과제를-통해-앞으로-해보고-싶은게-있다면-알려주세요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이번 과제를 통해 앞으로 해보고 싶은게 있다면 알려주세요!</h3>
<p>이번에는 FSD 아키텍처를 흉내만 낸 수준이었지만, 마침 다음주가 FSD 주제 과제이기에 다음주에는 제대로 된 FSD 아키텍처를 적용해보고 싶다.
FSD에 대한 무지에서 오는 거부감과 두려움이 있었는데, 막상 시도해보니 생각했던 것보단 적용이 수월했다.
FSD를 통해 얻은 이점은 그에 비해 훨씬 크단 걸 체감했기에, 실무든 사이드프로젝트든 기회가 생긴다면 적극적으로 사용해볼 것 같다.
또한, 현재는 시간 관계상 테스트 코드를 추가하지 못했지만,
순수 함수로 분리한 Model들에 대한 단위 테스트를 꼼꼼하게 작성하여 &quot;테스트 용이성&quot;이라는 장점을 실제로 누려보고 싶다.</p>
<hr/>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h3>
<ul>
<li><code>models</code> 디렉토리 내에서 <code>calculator</code>, <code>validator</code>, <code>updater</code> 등으로 파일을 잘게 쪼개는 방식이 일반적인지, 아니면 도메인 모델 단위로 하나의 파일에 모으는 것이 더 나은지 궁금합니다.</li>
<li><code>onSuccess</code>/<code>onError</code> 패턴을 사용해 제어권을 위임하는 방식이 리액트 생태계에서 권장되는 패턴인지, 더 나은 대안이 있을지 피드백 부탁드립니다.</li>
</ul></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>희재님 수고하셨습니다.</p>
<ul>
<li>
<p>models 디렉토리 내에서 calculator, validator, updater 등으로 파일을 잘게 쪼개는 방식이 일반적인지, 아니면 도메인 모델 단위로 하나의 파일에 모으는 것이 더 나은지 궁금합니다
일단 지금 희재님이 나눈 방식이 저는 나쁘지 않다고 생각합니다. 슬라이스의 역할을 적절히 추상화하신 것 같아요.
FSD도 사실 FSD를 마치 헌법처럼 그대로 차용하는 것보다 레이어를 어떻게 다루는가 그리고 각 레이어의 세그먼트와 같은 좋은 컨셉들을 어떻게 잘 활용할 것인가가 더 중요한것 같아요.
FSD도 회의적인 의견이 많으니까요. 좋은 컨셉만 뽑아서 나에게 혹은 우리팀에 혹은 이 프로젝트에 현실적으로 효율적으로,  효과적으로 활용하는 것이죠.
전 적절하다고 생각합니다. 중요한건 의도와 일관성인 것 같습니다 :)</p>
</li>
<li>
<p>onSuccess/onError 패턴을 사용해 제어권을 위임하는 방식이 리액트 생태계에서 권장되는 패턴인지, 더 나은 대안이 있을지 피드백 부탁드립니다.
넵 이건 아주 넓게 사용되는 방법이고 리액트뿐만아니라 많은 라이브러리에서도 활용되고 있습니다. 콜백을 활용한 디커플링의 일반적인 응용이죠.
이벤트 핸들러도 동일한 위임입니다. 비동기라면 promise를 활용해도 될 것 같고요.
throw를 예외를 발생시킬 수도 있고, 둘다 지원하는 경우도 있습니다.
방법 넘어 특정 모듈의 예외를 외부로 위임하는 것이 옳으냐라고 묻는다면, 위임은 반드시 필요한 부분인 것 같아요.
내부에서도 처리할 것이 있다면 처리하고 외부에서도 처리할 것을 처리하라고 알려주는 것이죠.</p>
</li>
</ul>
<p>근데 해당 로직들을 살펴보니 조금 과하다는 생각도 들어요.
예를들어 removeFromCart같은 경우는 return 값이 true, false면 될 것 같기도 합니다.
이런 예외 처리는 결괏값 or  예외 이거든요.
예를들면 단순히 두 인자를 받아서 더해주는 함수라고 본다면
결과를 합산해서 리턴하던가 혹은 인자중에 문자가 있다던지 계산을 할 수 없는 경우에는 예외를 던지거나 이런거죠.
removeFromCart의 경우는 결괏값으로 봐야할 것을 예외처리로 한 것 같아욥.</p>
<p>다만 저 레이어는 모종의 이유로 저런 인터페이스로 추상화 할 것이다라는 약속이 있다면 그렇게 해도 될 것 같습니다 :)</p>
<p>수고하셨습니다!</p></div></div><div class="mt-9"></div></div></main></div></div></div>
    <title>[2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 - 전희재 | 항해플러스 프론트엔드 7기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 7기] 전희재님이 제출한 [2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 전희재, [2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 - 전희재 | 항해플러스 프론트엔드 7기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 7기] 전희재님이 제출한 [2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 - 전희재 | 항해플러스 프론트엔드 7기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 7기] 전희재님이 제출한 [2팀 전희재] Chapter3-2. 디자인 패턴과 함수형 프로그래밍 그리고 상태 관리 설계 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  <!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_7th/favicon.ico"/>
  <!--app-head-->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_7th/assets/index-C-edMQf_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_7th/assets/index-B1cXSvNG.css">
</head>
<body>
<div id="root"><!--app-html--></div>
</body>
</html>
