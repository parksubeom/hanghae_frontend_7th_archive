<div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_7th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">7기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_7th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_7th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_7th/@piggggggggy/" data-discover="true">piggggggggy<!-- --> 님의 상세페이지</a> ＞ <!-- -->[1팀 박용태] Chapter2-2. 나만의 React 만들기</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_7th_chapter2-2/pull/9" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[1팀 박용태] Chapter2-2. 나만의 React 만들기</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->piggggggggy</span><span>2025.11.15</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="배포-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포 링크</h3>
<p><a href="https://piggggggggy.github.io/front_7th_chapter2-2/">https://piggggggggy.github.io/front_7th_chapter2-2/</a></p>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<h4 id="phase-1-vnode와-기초-유틸리티"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-1-vnode와-기초-유틸리티"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 1: VNode와 기초 유틸리티</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/elements.ts</code>: <code>createElement</code>, <code>normalizeNode</code>, <code>createChildPath</code></li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>utils/validators.ts</code>: <code>isEmptyValue</code></li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>utils/equals.ts</code>: <code>shallowEquals</code>, <code>deepEquals</code></li>
</ul>
<h4 id="phase-2-컨텍스트와-루트-초기화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-2-컨텍스트와-루트-초기화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 2: 컨텍스트와 루트 초기화</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/types.ts</code>: VNode/Instance/Context 타입 선언</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/context.ts</code>: 루트/훅 컨텍스트와 경로 스택 관리</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/setup.ts</code>: 컨테이너 초기화, 컨텍스트 리셋, 루트 렌더 트리거</li>
</ul>
<h4 id="phase-3-dom-인터페이스-구축"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-3-dom-인터페이스-구축"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 3: DOM 인터페이스 구축</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/dom.ts</code>: 속성/스타일/이벤트 적용 규칙, DOM 노드 탐색/삽입/제거</li>
</ul>
<h4 id="phase-4-렌더-스케줄링"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-4-렌더-스케줄링"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 4: 렌더 스케줄링</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>utils/enqueue.ts</code>: <code>enqueue</code>, <code>withEnqueue</code>로 마이크로태스크 큐 구성</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/render.ts</code>: <code>render</code>, <code>enqueueRender</code>로 루트 렌더 사이클 구현</li>
</ul>
<h4 id="phase-5-reconciliation"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-5-reconciliation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 5: Reconciliation</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/reconciler.ts</code>: 마운트/업데이트/언마운트, 자식 비교, key/anchor 처리</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/dom.ts</code>: Reconciliation에서 사용할 DOM 재배치 보조 함수 확인</li>
</ul>
<h4 id="phase-6-기본-hook-시스템"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-6-기본-hook-시스템"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 6: 기본 Hook 시스템</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/hooks.ts</code>: 훅 상태 저장, <code>useState</code>, <code>useEffect</code>, cleanup/queue 관리</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>core/context.ts</code>: 훅 커서 증가, 방문 경로 기록, 미사용 훅 정리</li>
</ul>
<p><strong>기본 과제 완료 기준</strong>: <code>basic.equals.test.tsx</code>, <code>basic.mini-react.test.tsx</code> 전부 통과</p>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<h4 id="phase-7-확장-hook--hoc"><a class="anchor" aria-hidden="true" tabindex="-1" href="#phase-7-확장-hook--hoc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Phase 7: 확장 Hook &amp; HOC</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>hooks/useRef.ts</code>: ref 객체 유지</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>hooks/useMemo.ts</code>, <code>hooks/useCallback.ts</code>: shallow 비교 기반 메모이제이션</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>hooks/useDeepMemo.ts</code>, <code>hooks/useAutoCallback.ts</code>: deep 비교/자동 콜백 헬퍼</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> <code>hocs/memo.ts</code>, <code>hocs/deepMemo.ts</code>: props 비교 기반 컴포넌트 메모이제이션</li>
</ul>
<hr/>
<h1 id="구조-및-구현-소개"><a class="anchor" aria-hidden="true" tabindex="-1" href="#구조-및-구현-소개"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>구조 및 구현 소개</h1>
<pre><code class="code-highlight"><span class="code-line"> packages/react/
</span><span class="code-line">  ├── src/
</span><span class="code-line">  │   ├── core/                    # 핵심 렌더링 엔진
</span><span class="code-line">  │   │   ├── commit.ts           # DOM 변경 커밋
</span><span class="code-line">  │   │   ├── constants.ts       
</span><span class="code-line">  │   │   ├── context.ts          # 전역 Singleton Context
</span><span class="code-line">  │   │   ├── dom.ts              # DOM 조작
</span><span class="code-line">  │   │   ├── elements.ts         # Element 생성
</span><span class="code-line">  │   │   ├── hookManager.ts      # Component 실행
</span><span class="code-line">  │   │   ├── hooks.ts            # 기본 React Hooks
</span><span class="code-line">  │   │   ├── reconciler.ts       # React Reconciler
</span><span class="code-line">  │   │   ├── render.ts           # 렌더링
</span><span class="code-line">  │   │   ├── scheduler.ts       
</span><span class="code-line">  │   │   ├── setup.ts            # 초기 설정
</span><span class="code-line">  │   │   ├── types.ts            # 타입 정의
</span><span class="code-line">  │   │   └── index.ts
</span><span class="code-line">  │   │
</span><span class="code-line">  │   ├── hooks/                
</span><span class="code-line">  │   │   ├── useAutoCallback.ts
</span><span class="code-line">  │   │   ├── useCallback.ts
</span><span class="code-line">  │   │   ├── useDeepMemo.ts
</span><span class="code-line">  │   │   ├── useMemo.ts
</span><span class="code-line">  │   │   ├── useRef.ts
</span><span class="code-line">  │   │   ├── types.ts
</span><span class="code-line">  │   │   └── index.ts
</span><span class="code-line">  │   │
</span><span class="code-line">  │   ├── hocs/                    
</span><span class="code-line">  │   │   ├── memo.ts           
</span><span class="code-line">  │   │   ├── deepMemo.ts  
</span><span class="code-line">  │   │   └── index.ts
</span><span class="code-line">  │   │
</span><span class="code-line">  │   ├── utils/                
</span><span class="code-line">  │   │   ├── enqueue.ts 
</span><span class="code-line">  │   │   ├── equals.ts     
</span><span class="code-line">  │   │   ├── validators.ts
</span><span class="code-line">  │   │   └── index.ts
</span><span class="code-line"> ...
</span></code><div class="copied" data-code=" packages/react/
  ├── src/
  │   ├── core/                    # 핵심 렌더링 엔진
  │   │   ├── commit.ts           # DOM 변경 커밋
  │   │   ├── constants.ts       
  │   │   ├── context.ts          # 전역 Singleton Context
  │   │   ├── dom.ts              # DOM 조작
  │   │   ├── elements.ts         # Element 생성
  │   │   ├── hookManager.ts      # Component 실행
  │   │   ├── hooks.ts            # 기본 React Hooks
  │   │   ├── reconciler.ts       # React Reconciler
  │   │   ├── render.ts           # 렌더링
  │   │   ├── scheduler.ts       
  │   │   ├── setup.ts            # 초기 설정
  │   │   ├── types.ts            # 타입 정의
  │   │   └── index.ts
  │   │
  │   ├── hooks/                
  │   │   ├── useAutoCallback.ts
  │   │   ├── useCallback.ts
  │   │   ├── useDeepMemo.ts
  │   │   ├── useMemo.ts
  │   │   ├── useRef.ts
  │   │   ├── types.ts
  │   │   └── index.ts
  │   │
  │   ├── hocs/                    
  │   │   ├── memo.ts           
  │   │   ├── deepMemo.ts  
  │   │   └── index.ts
  │   │
  │   ├── utils/                
  │   │   ├── enqueue.ts 
  │   │   ├── equals.ts     
  │   │   ├── validators.ts
  │   │   └── index.ts
 ...
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>전반적인 구조와 동작의 흐름은 다음과 같습니다 :</p>
<ol>
<li><code>VNode</code> 생성 (Virtual DOM)</li>
<li>초기 렌더링 (Setup &amp; First Render)</li>
<li>Render Phase (Reconciliation)</li>
<li>Commit Phase (실제 DOM 조작)</li>
<li>Hooks (<code>useState</code> &amp; <code>useEffect</code>)</li>
<li>Scheduler (비동기 Baching 렌더링)</li>
<li>사후 처리 (Cleanup &amp; Effects)</li>
</ol>
<h2 id="1-vnode-생성-virtual-dom"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-vnode-생성-virtual-dom"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. <code>VNode</code> 생성 (Virtual DOM)</h2>
<p>흐름의 시작은 개발자가 작성한 JSX를 Babel이 <code>createElement</code> 함수로 변환시키면서 시작됩니다.
최종적으로 <code>createElement</code>는 <code>VNode</code> 객체를 만들어냅니다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  type<span class="token operator">:</span> <span class="token string">&#x27;div&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  props<span class="token operator">:</span> <span class="token punctuation">{</span> className<span class="token operator">:</span> <span class="token string">&#x27;button&#x27;</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  key<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  type<span class="token operator">:</span> ProductCard<span class="token punctuation">,</span> <span class="token comment">// function</span>
</span><span class="code-line">  props<span class="token operator">:</span> <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token string">&#x27;123&#x27;</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&#x27;뚫어뻥&#x27;</span><span class="token punctuation">,</span> count<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  key<span class="token operator">:</span> <span class="token string">&#x27;product-3&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  type<span class="token operator">:</span> Fragment<span class="token punctuation">,</span> <span class="token comment">// Symbol</span>
</span><span class="code-line">  props<span class="token operator">:</span> <span class="token punctuation">{</span> productId<span class="token operator">:</span> <span class="token string">&#x27;123&#x27;</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&#x27;뚫어뻥&#x27;</span><span class="token punctuation">,</span> count<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  key<span class="token operator">:</span> <span class="token string">&#x27;product-3&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  type<span class="token operator">:</span> Text<span class="token punctuation">,</span> <span class="token comment">// Symbol</span>
</span><span class="code-line">  props<span class="token operator">:</span> <span class="token punctuation">{</span> nodeValue<span class="token operator">:</span> <span class="token string">&#x27;텍스트&#x27;</span><span class="token punctuation">,</span> children<span class="token punctuation">;</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  key<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="{
  type: &#x27;div&#x27;,
  props: { className: &#x27;button&#x27;, children: [...] },
  key: null,
}
...
{
  type: ProductCard, // function
  props: { productId: &#x27;123&#x27;, title: &#x27;뚫어뻥&#x27;, count: 5, ... },
  key: &#x27;product-3&#x27;,
}
...
{
  type: Fragment, // Symbol
  props: { productId: &#x27;123&#x27;, title: &#x27;뚫어뻥&#x27;, count: 5, ... },
  key: &#x27;product-3&#x27;,
}
...
{
  type: Text, // Symbol
  props: { nodeValue: &#x27;텍스트&#x27;, children; [...] },
  key: null,
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이렇게 <code>createElement</code> 를 통해 다양한 형태의 요소들을 일관된 VNode 형태로 정규화합니다. 이 덕에 이후 로직은 정규화된 VNode 객체를 통해 진행됩니다.</p>
<h2 id="2-초기-렌더링-setup--first-render"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-초기-렌더링-setup--first-render"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 초기 렌더링 (Setup &amp; First Render)</h2>
<p>앱이 시작될 때, <code>setup()</code> 함수가 호출됩니다.
<code>setup()</code> 함수의 역할을 다음과 같습니다.</p>
<ol>
<li>초기화 : Context에 있는 전역 상태들(Root Container, Hooks 관련 정보, Effects 등)을 정리합니다.</li>
<li>첫 렌더링 트리거 : <code>render()</code> 함수를 호출하여 첫 렌더링 작업을 시작합니다.</li>
</ol>
<h2 id="3-render-phase-reconciliation"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-render-phase-reconciliation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Render Phase (Reconciliation)</h2>
<p><code>render()</code> 함수 호출 후, 이 mini React의 핵심 단계인 재조정(Reconciliation) 단계가 시작됩니다. 이 과정은 다음과 같은 철학을 갖습니다.</p>
<blockquote>
<p>&quot;변경된 부분만 찾아서 업데이트한다.&quot;</p>
</blockquote>
<p><code>reconcile</code> 함수는 이를 위해</p>
<ol>
<li>비교 (Diffing)</li>
<li>비교 결과에 따른 4가지 시나리오</li>
<li>컴포넌트 실행
의 순서로 작업을 진행합니다.</li>
</ol>
<h3 id="a-비교-diffing"><a class="anchor" aria-hidden="true" tabindex="-1" href="#a-비교-diffing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A. 비교 (Diffing)</h3>
<p>변경된 부분만 찾아내기 위해 다음 세가지 인자를 받습니다.</p>
<ul>
<li>부모 DOM : 변경 사항을 반영할 실제 DOM 요소</li>
<li>기존 인스턴스 (Old Instance) : 직전 렌더링 때 생성된 정보 (실제 DOM 참조, 기존 Props 등 포함)</li>
<li>새로운 VNode : 이번 렌더링으로 그려져야 할 모습</li>
</ul>
<h3 id="b-비교-결과에-따른-4가지-시나리오"><a class="anchor" aria-hidden="true" tabindex="-1" href="#b-비교-결과에-따른-4가지-시나리오"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>B. 비교 결과에 따른 4가지 시나리오</h3>
<p>Dffing 비교 결과에 따라,</p>
<ul>
<li><strong>Unmount (제거)</strong>
<ul>
<li>상황 : 새로운 VNode가 없음 (null임)</li>
<li>액션 : REMOVE effect를 예약</li>
</ul>
</li>
<li><strong>Mount (생성)</strong>
<ul>
<li>상황 : 기존 인스턴스가 없음</li>
<li>액션 : 새로운 인스턴스를 생성하고, INSERT effect(<code>domMutation</code>)를 예약</li>
</ul>
</li>
<li><strong>Replace (교체)</strong>
<ul>
<li>상황 : VNode의 <code>type</code>이나 <code>key</code>가 다름</li>
<li>액션 : 완전히 다른 요소로 간주, 기존 요소를 REMOVE하고 새로운 요소를 INSERT 하는 effect를 예약</li>
</ul>
</li>
<li><strong>Update (갱신)</strong>
<ul>
<li>상황 : VNode의 <code>type</code>과 <code>key</code>가 같음</li>
<li>액션 :
<ul>
<li><strong>DOM 재사용</strong> : 기존 DOM 유지</li>
<li><strong>Props 갱신</strong> : UPDATE_PROPS effect를 예약하여 속성만 교체</li>
<li><strong>위치 보정</strong> : INSERT effect를 예약하여 순서가 바뀌었다면 제자리를 찾아줌</li>
<li><strong>자식 재귀 호출</strong> : <code>reconcileChildren</code>을 통해 자식들의 비교를 재귀적으로 수행</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// reconcilers.ts</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line">  <span class="token comment">// 1. Unmount</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token function">handleUnmount</span><span class="token punctuation">(</span>parentDom<span class="token punctuation">,</span> instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 2. Mount</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token function">handleMount</span><span class="token punctuation">(</span>parentDom<span class="token punctuation">,</span> node<span class="token punctuation">,</span> path<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 3. Replace</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>node<span class="token punctuation">.</span>type <span class="token operator">!==</span> node<span class="token punctuation">.</span>type <span class="token operator">||</span> instance<span class="token punctuation">.</span>key <span class="token operator">!==</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token function">handleReplace</span><span class="token punctuation">(</span>parentDom<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> node<span class="token punctuation">,</span> path<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 4. Update</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">handleUpdate</span><span class="token punctuation">(</span>parentDom<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> node<span class="token punctuation">,</span> path<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator">...</span>
</span></code><div class="copied" data-code="// reconcilers.ts

...
  // 1. Unmount
  if (!node) {
    if (instance) handleUnmount(parentDom, instance);
    return null;
  }

  // 2. Mount
  if (!instance) {
    return handleMount(parentDom, node, path, anchor);
  }

  // 3. Replace
  if (instance.node.type !== node.type || instance.key !== node.key) {
    return handleReplace(parentDom, instance, node, path, anchor);
  }

  // 4. Update
  return handleUpdate(parentDom, instance, node, path, anchor);
...
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="c-컴포넌트-실행"><a class="anchor" aria-hidden="true" tabindex="-1" href="#c-컴포넌트-실행"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C. 컴포넌트 실행</h3>
<p>VNode의 <code>type</code>이 <strong>Function Component</strong>일 때,</p>
<ul>
<li><code>hookManager.runComponent()</code>를 통해 실행</li>
<li>이때, <strong>Hooks</strong>가 실행됨. (<strong>useState, useEffect</strong>)</li>
<li>컴포넌트 실행 결과로 나온 VNode를 가지고 다시 자식 <code>reconciliation</code> 을 시작!!</li>
</ul>
<h2 id="4-commit-phase-실제-dom-조작"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-commit-phase-실제-dom-조작"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. Commit Phase (실제 DOM 조작)</h2>
<p>재조정(<code>reconciliation</code>) 과정은 실제 DOM을 건드리지 않고, &quot;무엇을 해야할지?&quot;(<code>domMutation</code>)만 <code>mutationQueue</code>에 추가합니다. 재조정이 끝나면, 그 때 <code>domMutations</code> commit이 시작됩니다.</p>
<p>-&gt; <code>commitMutations(runtimeContext.workQueue.domMutations)</code> : queue에 추가된 Effects(INSERT, REMOVE, UPDATE_PROPS 등)를 순서대로 실행하여 <strong>한번에 실제 DOM에 반영</strong>합니다.</p>
<h2 id="5-hooks-동작-원리-usestate--useeffect"><a class="anchor" aria-hidden="true" tabindex="-1" href="#5-hooks-동작-원리-usestate--useeffect"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>5. Hooks 동작 원리 (<code>useState</code> &amp; <code>useEffect</code>)</h2>
<h3 id="a-전역-context"><a class="anchor" aria-hidden="true" tabindex="-1" href="#a-전역-context"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A. 전역 Context</h3>
<p>컴포넌트에 작성되는 Hooks과 관련된 상태/정보를 각 컴포넌트의 맥락에 저장하지 않고, 전역의 Context라는 전역 저장소에 저장합니다. <code>Key(component path) : Value(state[], effect[])</code> 형태로 저장.</p>
<h3 id="b-cursor-기반-접근"><a class="anchor" aria-hidden="true" tabindex="-1" href="#b-cursor-기반-접근"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>B. Cursor 기반 접근</h3>
<p>컴포넌트가 실행될 때, 내부의 훅들은 순서대로 실행됩니다.</p>
<p>예시 :</p>
<ol>
<li>첫 <code>useState</code> 호출 -&gt; state 배열의 0번 인덱스로 저장</li>
<li>첫 <code>useEffect</code> 호출 -&gt; effects 배열의 0번 인덱스로 저장</li>
<li>두번째 <code>useState</code> 호출 -&gt; state 배열의 1번 인덱스로 저장
(+) 원래 state와 effects를 따로 저장하고, 각각의 Cursor도 따로 운용했으나, 리팩터링하며 하나의 Hooks Map에 저장하고 Cursor도 하나로 통일하여 운용하는 것으로 변경</li>
</ol>
<blockquote>
<p><strong>막간 A-ha 모먼트</strong>
-&gt; 이래서 React Hooks은 조건문 안에서 실행되면 안된다는 거구나..! 조건 문에 의해 Cursor index가 꼬이면 의도지 않은 상태나 이펙트를 참조하게 될 수 있으니간..!!</p>
</blockquote>
<h3 id="c-상태-변경-setstate"><a class="anchor" aria-hidden="true" tabindex="-1" href="#c-상태-변경-setstate"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C. 상태 변경 (<code>setState</code>)</h3>
<p><code>setState</code>가 호출되면 :</p>
<ol>
<li>전역 저장소(Context)에 있는 값을 업데이트</li>
<li><code>enqueueRender()</code>를 호출하여 리렌더링을 예약!</li>
</ol>
<h2 id="6-scheduler-비동기-baching-렌더링을-통한-성능-최적화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#6-scheduler-비동기-baching-렌더링을-통한-성능-최적화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>6. Scheduler (비동기 Baching 렌더링을 통한 성능 최적화)</h2>
<p><code>setState</code>를 5번 연속 호출한다고 해서 render가 5번 발생하지 않음.</p>
<ul>
<li><code>enqueueRender()</code> : <code>queueMicrotask</code>를 사용해 렌더링 작업을 <strong>마이크로태스크 큐</strong>에 넣음</li>
<li><code>Batching</code> : 자바스크립트 콜 스택이 비워질 때까지 기다렸다가, 한 번에 가장 최신의 상태로 딱 한번만 <code>render()</code>를 실행시킴.</li>
</ul>
<h2 id="7-사후-처리-cleanup--effects"><a class="anchor" aria-hidden="true" tabindex="-1" href="#7-사후-처리-cleanup--effects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>7. 사후 처리 (Cleanup &amp; Effects)</h2>
<p>렌더링과 DOM 업데이트가 모두 끝난 직후 :</p>
<ol>
<li><code>Cleanup</code>: 언마운트된 컴포넌트나, 의존성이 바뀐 Effect의 Cleanup 함수를 실행함.</li>
<li><code>useEffect</code> 실행 : 새로 등록된 Effect 함수들을 실행함.</li>
</ol>
<h2 id="전체-동작-요약"><a class="anchor" aria-hidden="true" tabindex="-1" href="#전체-동작-요약"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>전체 동작 요약</h2>
<ol>
<li><strong>Trigger</strong> : <code>setState</code> 호출 -&gt; 상태 업데이트 -&gt; <code>enqueueRender</code> 예약</li>
<li><strong>Redner 시작</strong> : 스케쥴러에 의해 <code>render()</code> 실행</li>
<li><strong>Hooks Reset</strong> : Cursor를 0으로 초기화</li>
<li><strong>Reconciliation</strong> :</li>
</ol>
<ul>
<li>Component 함수 실행</li>
<li>새로운 VNode 생성</li>
<li>이전 VNode 비교 (Diffing)</li>
<li>변경 사항을 <code>domMutations</code> 큐에 추가</li>
</ul>
<ol start="5">
<li><strong>Commit</strong> : domMutations 큐를 실행하여 화면 갱신</li>
<li><strong>Effects</strong> : cleanup 실행 후 새로운 <code>useEffect</code> 실행</li>
</ol>
<h1 id="개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>개선</h1>
<blockquote>
<p>기존의 단일 Context 객체를 운용하는 방식으로 기능 구현은 성공했지만, **&quot;데이터 흐름&quot;**과 **&quot;제어의 흐름&quot;**이 명확하게 분리되어있지 않다고 느껴졌습니다</p>
</blockquote>
<blockquote>
<p>Render 의 흐름이 눈에 명확하게 들어오지 않는다고 느껴졌습니다.</p>
</blockquote>
<p>결론적으로 이런 개선이 이뤄졌습니다.</p>
<ol>
<li>투명한 데이터 흐름 (<code>render.ts</code>) - <code>render</code> 함수가 <strong>파이프라인</strong> 역할을 하는 것처럼 보이도록 !!!</li>
<li>영속 Context와 일시적 Context 분리 (<code>context.ts</code>) - <code>storeContext</code>와 <code>runtimeContext</code>로 분리!</li>
<li>역할의 명확화 (<code>commit.ts</code>, <code>scheduler.ts</code>) - <code>reconcile</code>함수는 이제 **&quot;계산&quot;**에만 집중하고, <strong>반영</strong>은 전담 모듈이!!!</li>
</ol>
<blockquote>
<p>이제 <code>reconcile</code> 함수의 내부 로직이 복잡하더라도, 막상 그 역할은 <strong><code>domMutations</code> Queue를 채우는 역할</strong>일 뿐이다!!</p>
</blockquote>
<h2 id="1-context-구조-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-context-구조-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. Context 구조 개선</h2>
<p>Context의 구조를 **&quot;영속 상태&quot;**와 **&quot;일시적 상태와 작업&quot;**으로 분리하는 것으로 방향을 잡았습니다.</p>
<p><code>context</code> 객체에 모든 상태와 정보를 관리하는 것 대신,</p>
<ol>
<li><code>StoreContext</code> (영속) : 렌더링이 끝나도 기억해야 하는 값들 - Hook 상태, 현재 VDOM, Instance 등</li>
<li><code>RuntimeContext</code> (일시적) : 렌더링 중에만 사용되고, 매 프레임마다 초기화되는 값들 - 커서, 큐 등</li>
</ol>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ASIS</span>
</span><span class="code-line"><span class="token keyword">const</span> context<span class="token operator">:</span> Context <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  root<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    container<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    node<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    instance<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">{</span> container<span class="token punctuation">,</span> node <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    state<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    cursor<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    visited<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    componentStack<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// Method ..</span>
</span><span class="code-line">    <span class="token keyword">get</span> <span class="token function">currentPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">get</span> <span class="token function">currentCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">get</span> <span class="token function">currentHooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  effects<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    queue<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  domEffects<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// TOBE</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Persistent context</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> storeContext<span class="token operator">:</span> StoreContext <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  root<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    container<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    node<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    instance<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  hooks<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  cleanupEffects<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Temporary context for each render</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> runtimeContext<span class="token operator">:</span> RuntimeContext <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  cursor<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    path<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    index<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  workQueue<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    domMutations<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    passiveEffects<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    cleanups<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  componentStack<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  visited<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">resetRuntime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>domMutations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>passiveEffects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>cleanups <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  runtimeContext<span class="token punctuation">.</span>visited<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// ASIS
const context: Context = {
  root: {
    container: null,
    node: null,
    instance: null,
    reset({ container, node }) {...},
  },

  hooks: {
    state: new Map(),
    cursor: new Map(),
    visited: new Set(),
    componentStack: [],
    clear() {...},

    // Method ..
    get currentPath() {...},

    get currentCursor() {...},

    get currentHooks() {...},
  },

  effects: {
    queue: [],
  },

  domEffects: {...}
};

// TOBE

// Persistent context
export const storeContext: StoreContext = {
  root: {
    container: null,
    node: null,
    instance: null,
  },
  hooks: new Map(),
  cleanupEffects: new Map(),
};

// Temporary context for each render
export const runtimeContext: RuntimeContext = {
  cursor: {
    path: null,
    index: 0,
  },
  workQueue: {
    domMutations: [],
    passiveEffects: [],
    cleanups: [],
  },
  componentStack: [],
  visited: new Set(),
};

export const resetRuntime = () =&gt; {
  runtimeContext.cursor.path = null;
  runtimeContext.cursor.index = 0;
  runtimeContext.workQueue.domMutations = [];
  runtimeContext.workQueue.passiveEffects = [];
  runtimeContext.workQueue.cleanups = [];
  runtimeContext.visited.clear();
};

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h2 id="2-render-pipline-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-render-pipline-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. Render Pipline 개선</h2>
<p><code>render</code> 함수가 전체 생명주기의 목차역할을 할 수 있도록 추상화 및 정리를 진행했습니다.</p>
<p><code>render</code> 함수만 봐도
<code>준비 -&gt; 재조정 -&gt; 반영 -&gt; 이펙트</code>의 흐름이 한눈에 들어올 수 있도록 구성했습니다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token constant">ROOT_PATH</span> <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> render <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. reset runtime context</span>
</span><span class="code-line">  <span class="token function">resetRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 2. reconcile</span>
</span><span class="code-line">  <span class="token keyword">const</span> oldInstance <span class="token operator">=</span> storeContext<span class="token punctuation">.</span>root<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> newInstance <span class="token operator">=</span> <span class="token function">reconcile</span><span class="token punctuation">(</span>
</span><span class="code-line">    storeContext<span class="token punctuation">.</span>root<span class="token punctuation">.</span>container <span class="token keyword">as</span> HTMLElement<span class="token punctuation">,</span>
</span><span class="code-line">    oldInstance<span class="token punctuation">,</span>
</span><span class="code-line">    storeContext<span class="token punctuation">.</span>root<span class="token punctuation">.</span>node<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token constant">ROOT_PATH</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  storeContext<span class="token punctuation">.</span>root<span class="token punctuation">.</span>instance <span class="token operator">=</span> newInstance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 3. Unused Hooks Cleanup</span>
</span><span class="code-line">  <span class="token function">cleanupUnusedHooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 4. commit mutations</span>
</span><span class="code-line">  <span class="token function">commitMutations</span><span class="token punctuation">(</span>runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>domMutations<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 5. flush passive effects</span>
</span><span class="code-line">  <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">flushPassiveEffects</span><span class="token punctuation">(</span>runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>passiveEffects<span class="token punctuation">,</span> runtimeContext<span class="token punctuation">.</span>workQueue<span class="token punctuation">.</span>cleanups<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="const ROOT_PATH = &quot;root&quot;;

export const render = (): void =&gt; {
  // 1. reset runtime context
  resetRuntime();

  // 2. reconcile
  const oldInstance = storeContext.root.instance;
  const newInstance = reconcile(
    storeContext.root.container as HTMLElement,
    oldInstance,
    storeContext.root.node,
    ROOT_PATH,
  );
  storeContext.root.instance = newInstance;

  // 3. Unused Hooks Cleanup
  cleanupUnusedHooks();

  // 4. commit mutations
  commitMutations(runtimeContext.workQueue.domMutations);

  // 5. flush passive effects
  enqueue(() =&gt; {
    flushPassiveEffects(runtimeContext.workQueue.passiveEffects, runtimeContext.workQueue.cleanups);
  });
};

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h2 id="3-commit-로직의-분리와-투명화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-commit-로직의-분리와-투명화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Commit 로직의 분리와 투명화</h2>
<p><code>reconcile</code> 내부에서 <code>domEffects</code> 를 추가하는 구조로 디자인했지만, 수집된 <code>domEffect</code> 들이 어떻게 처리되는지 를 매끄럽게 확인하기 어려웠습니다.
따라서, 이것이 어떻게 처리되는지를 <code>commit.ts</code> 모듈로 분리했습니다.</p>
<blockquote>
<p>&quot;<code>reconcile</code>&quot;은 계산을 통해 Mutation Queue를 추가하고, &quot;<code>commit</code>&quot;은 이 Queue를 보고 Mutation 작업을 집행한다. 는 컨셉</p>
</blockquote>
<pre><code class="code-highlight"><span class="code-line">// commmit.ts
</span><span class="code-line">import { updateDomProps, insertInstance, removeInstance } from &quot;./dom&quot;;
</span><span class="code-line">
</span><span class="code-line">export const commitMutations = (mutations: DomEffect[]) =&gt; {
</span><span class="code-line">  for (const mutation of mutations) {
</span><span class="code-line">    switch (mutation.type) {
</span><span class="code-line">      case &quot;INSERT&quot;:
</span><span class="code-line">        insertInstance(mutation.parentDOM, mutation.instance, mutation.anchor);
</span><span class="code-line">        break;
</span><span class="code-line">      case &quot;REMOVE&quot;:
</span><span class="code-line">        removeInstance(mutation.parentDOM, mutation.instance);
</span><span class="code-line">        break;
</span><span class="code-line">      case &quot;UPDATE_PROPS&quot;:
</span><span class="code-line">        updateDomProps(mutation.dom, mutation.prevProps, mutation.nextProps);
</span><span class="code-line">        break;
</span><span class="code-line">      case &quot;UPDATE_TEXT&quot;:
</span><span class="code-line">        mutation.dom.nodeValue = mutation.nextText;
</span><span class="code-line">        break;
</span><span class="code-line">    }
</span><span class="code-line">  }
</span><span class="code-line">};
</span></code><div class="copied" data-code="// commmit.ts
import { updateDomProps, insertInstance, removeInstance } from &quot;./dom&quot;;

export const commitMutations = (mutations: DomEffect[]) =&gt; {
  for (const mutation of mutations) {
    switch (mutation.type) {
      case &quot;INSERT&quot;:
        insertInstance(mutation.parentDOM, mutation.instance, mutation.anchor);
        break;
      case &quot;REMOVE&quot;:
        removeInstance(mutation.parentDOM, mutation.instance);
        break;
      case &quot;UPDATE_PROPS&quot;:
        updateDomProps(mutation.dom, mutation.prevProps, mutation.nextProps);
        break;
      case &quot;UPDATE_TEXT&quot;:
        mutation.dom.nodeValue = mutation.nextText;
        break;
    }
  }
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h2 id="4-effect-scheduler-정리"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-effect-scheduler-정리"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. Effect Scheduler 정리</h2>
<p>기존의 복잡했던 이펙트 처리(old 정리 후 new 실행) 로직을, <code>scheduler</code>라는 이름으로 묶어 명확히 수행하는 방향으로 개선했습니다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// scheduler.ts</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> flushPassiveEffects <span class="token operator">=</span> <span class="token punctuation">(</span>newEffects<span class="token operator">:</span> EffectHook<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> unmountCleanups<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. unmount components</span>
</span><span class="code-line">  unmountCleanups<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cleanup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 2. execute previous cleanup functions</span>
</span><span class="code-line">  newEffects<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// execute previous cleanup functions</span>
</span><span class="code-line">    <span class="token keyword">const</span> cleanups <span class="token operator">=</span> storeContext<span class="token punctuation">.</span>cleanupEffects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>effect<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>cleanups<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      cleanups<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cleanup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      storeContext<span class="token punctuation">.</span>cleanupEffects<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>effect<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>effect<span class="token punctuation">.</span>cleanup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      effect<span class="token punctuation">.</span><span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      effect<span class="token punctuation">.</span>cleanup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 3. new!</span>
</span><span class="code-line">  newEffects<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> cleanupFn <span class="token operator">=</span> effect<span class="token punctuation">.</span><span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> cleanupFn <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        effect<span class="token punctuation">.</span>cleanup <span class="token operator">=</span> cleanupFn<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        effect<span class="token punctuation">.</span>cleanup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// scheduler.ts

export const flushPassiveEffects = (newEffects: EffectHook[], unmountCleanups: (() =&gt; void)[]) =&gt; {
  // 1. unmount components
  unmountCleanups.forEach((cleanup) =&gt; cleanup());

  // 2. execute previous cleanup functions
  newEffects.forEach((effect) =&gt; {
    // execute previous cleanup functions
    const cleanups = storeContext.cleanupEffects.get(effect.path);
    if (cleanups) {
      cleanups.forEach((cleanup) =&gt; cleanup());
      storeContext.cleanupEffects.delete(effect.path);
    }

    if (effect.cleanup) {
      effect.cleanup();
      effect.cleanup = null;
    }
  });

  // 3. new!
  newEffects.forEach((effect) =&gt; {
    try {
      const cleanupFn = effect.effect();
      if (typeof cleanupFn === &quot;function&quot;) {
        effect.cleanup = cleanupFn;
      } else {
        effect.cleanup = null;
      }
    } catch (e) {
      console.error(e);
    }
  });
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h1 id="과제-회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 회고</h1>
<h2 id="작업의-흐름과-고민들"><a class="anchor" aria-hidden="true" tabindex="-1" href="#작업의-흐름과-고민들"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>작업의 흐름과 고민들...</h2>
<p>실제 작업 시간보다는 공부하고 이해하는 시간이 월등히 길었습니다. 결국에는 Mini React를 구현하는 과정이기 때문에, React의 구조에서 사고를 해야한다고 생각했는데, 그렇다보니 실제 React의 동작원리와 철학에 대한 이해 없이는 시작하기가 너무 어려웠습니다.</p>
<p>처음에는 내가 이 과제를 통해 구현해야하는 것은 무엇인가? 라는 고민부터 시작했습니다.</p>
<blockquote>
<ol>
<li>React 구현</li>
<li>React가 하는 것은 뭐지?</li>
<li>그 부분에서도 내가 구현해야하는 것은?</li>
<li>React의 SPA철학은? 다른 SPA 도구들과의 차이점은?</li>
<li>React를 직접 구현하기 앞서, React 밖에서 내가 개념이 부족한 부분이 있는지?
등의 고민과 학습이 선행되었고...  작업 계획을 짰습니다.</li>
</ol>
</blockquote>
<h3 id="createelement"><a class="anchor" aria-hidden="true" tabindex="-1" href="#createelement"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>createElement</code></h3>
<p>구현은 <code>createElement</code>의 구현부터 시작했습니다.
처음에 상당히 어렵고 답답했는데, &quot;내가 왜 이걸 하고 있지? 이게 필요한 이유는 뭐지? 뭐가 이해 안되는거지?&quot; 이런 고민을 하다보니, JSX와 JSX가 변환되는 과정에 대한 이해가 부족하다는 것을 깨닫고, 실제 JSX가 Babel을 통해 어떻게 변환이 되는지 부터 분석했습니다. 그과정에서 <a href="https://babeljs.io/repl#?config_lz=N4IgZglgNgpgdgQwLYxALhAJxgBygOgCsBnEAGhB22JgBdS0BtRkeAN3NFoUwHM6GICDAAEARjHkQSAPYATAK6wGYBFBoUFNAEILotAJJxB8WpgCeUgMYzsJdCADM-AEySKAIwW9IADxgMZgowAL4AumEUxDIKmFYwACrmOKgYsoqwICFAA&amp;evaluate=true&amp;lineWrap=true&amp;version=7.28.5">Babel Playground</a>를 찾아내 아주 많은 도움을 받았습니다.</p>
<p>그 과정에서
&quot;그냥 배열, 같은 빈 객체 타입이나, 원시타입은 어떤 형태의 VNode로 만들어져야할까?&quot;
&quot;createElement가 VNode로 변환하는 과정에서 []이나 {}는 어떻게 처리할까? 그리고 빈 객체가 아닌 채워진 객체라면?&quot;
&quot;Fragment는 전용 vnode가 있다. 이것을 돔을 수정할 때 계산한다. -&gt; 왜?&quot;
이런 질문을 던지고, 해소하는데도 적잖은 시간을 썼습니다..</p>
<h3 id="구조-개념잡기-context-instance-virtual-dom-real-dom"><a class="anchor" aria-hidden="true" tabindex="-1" href="#구조-개념잡기-context-instance-virtual-dom-real-dom"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>구조 개념잡기 (Context, Instance, Virtual DOM, Real DOM)</h3>
<p>&quot;React는 Virtual DOM을 활용하여, 변경된 부분만 Real DOM에 반영한다.&quot; 정도는 이제 FE개발자로서,, 알기는 합니다만, React를 실제로 구현하는 과정에서의 Virtual DOM을 이해하는 것은 아예 다른 차원의 이해였습니다.</p>
<p>&quot;왜 Virtual DOM을 사용하나, VIrtual DOM의 역할은?&quot; 부터 시작해. React 엔진의 원리와 구조를 코드 레벨에서 이해애야했습니다.</p>
<ul>
<li>Virtual DOM</li>
<li>Real DOM</li>
<li>Instance</li>
<li>Context</li>
</ul>
<h3 id="동작-개념잡기-setup-render-reconcile-dom-조작-그리고-life-cycle"><a class="anchor" aria-hidden="true" tabindex="-1" href="#동작-개념잡기-setup-render-reconcile-dom-조작-그리고-life-cycle"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>동작 개념잡기 (Setup, Render, Reconcile, DOM 조작 그리고 Life Cycle)</h3>
<p>내부에 존재하는 함수들과, 그 역할 그리고 실제 각 라이프 사이클에서 어떤 파이프라인으로 동작하는지 이해하는데도 적잖은 시간을 사용했습니다.</p>
<p>이 과정에서 정말 많은 역할들이 있지만, 그게 &quot;정말 필요해서 있다&quot;를 이해하기 까지 머리가 너무 아팠습니다. 정규화된 VNode를 기존 인스턴스의 VNode와 비교하고,, 그것을 또 재귀적으로 수행하고,, 그 과정에서 Instance의 dom에 붙이고,, 그러다보니 더 헷갈려서, reconcile에서 dom 조작의 관심사를 아예 분리해서 domEffect (현 domMutation) 과정을 새로 만들어내고.... 뇌가 무한 재귀에 빠졌다가 나왔다가를 반복하는 시간이었습니다.</p>
<p>실제 작성했던 고민들</p>
<blockquote>
<p>Q) render 함수 안에서, context를 가지고 reconcile함수를 돌린다면, 그리고 reconcile에서 instance를 업데이트한다면, dom 업데이트는 어디서 이뤄져야할까? render? reconcile?</p>
</blockquote>
<blockquote>
<p>Q) reconcile과 commit을 분리했을 때, reconcile과정에서 Instance Tree의  VNode는 업데이트 되고있음. 그런데 Instance가 자체가 교체되면(업데이트가 아닌), dom도 날아갈텐데, reconcile된 instance tree로 어떻게 commit을 할까? reconcile 과정에서 create instance 할 때, dom도 만들어줘야할까?</p>
</blockquote>
<blockquote>
<p>&quot;Component는 DOM이 없는데 instance.dom은?&quot;
&quot;자식의 DOM을 참조한다는데, 자식이 여러 개면?&quot;
&quot;Reconcile 중 Instance가 교체되면 dom 참조가 끊기는데?&quot;</p>
</blockquote>
<h3 id="usestate와-useeffect-cursor"><a class="anchor" aria-hidden="true" tabindex="-1" href="#usestate와-useeffect-cursor"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>useState</code>와 <code>useEffect</code>, <code>cursor</code></h3>
<p>아... 지금 생각해도 아찔합니다. 단순히 지난주차의 수준이 아니었습니다ㅠㅠ 지난주에 집중했던 포인트는, <code>state</code>의 변경이 어떻게 컴포넌트의 리렌더를 트리거할 것 인지?에 집중했다면, 이번에는 그 사고를 React 엔진의 관점으로 확장해야했습니다. 상태 값과 deps의 저장, 다음 렌더 시 그 값을 어떻게 다시 찾아내 참조할 것인지, Cursor가 정답일까? 뭔가 조악한데... 등의 고민이 핵심이었던 것 같습니다.</p>
<p>처음에는 Cursor와 Hook Map을 <code>state</code>와 <code>effect</code> 따로 운용했지만, 나중에는 위 과정에서의 이해를 통해 이를 하나의 Cursor와 Hooks로 통합 관리할 수 있게 되었습니다...</p>
<h3 id="아하-모먼트-a-ha-moment"><a class="anchor" aria-hidden="true" tabindex="-1" href="#아하-모먼트-a-ha-moment"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>아하! 모먼트 (A-ha! Moment)</h3>
<!-- -->
<blockquote>
<p>굉장히 많은 아-하! 모먼트가 있었지만, 하나하나 작성하기에는 머리가 아픕니다..</p>
</blockquote>
<ol>
<li>
<p>막연하게만 알고 있던, &quot;hook은 왜 조건문 안에서 사용하면 안될까?&quot;를 명확하게 알게 되었습니다.
직접 Cursor 기반의 Hook Context 관리 구조를 이해하고 디자인 하면서, 조건부 호출 때문에 Cursor Index가 오염된다면, 의도치 않은 상태와 이펙트가 사용될 수 있겠구나! 이해할 수 있었습니다.</p>
</li>
<li>
<p>심화 과제에서 추가 훅을 구현하는 과정이 대부분 아-하! 모먼트였던 것 같습니다. 기존에는 hook을 사용할 때, &quot;이건 이런 상황에 사용해야해&quot;, &quot;이 훅은 이런 부분을 메모이제이션 해줘!&quot; 수준의 이해에서 그쳤다면, &quot;이건 이런 메모이제이션을 하는 훅이니까(기존 지식 수준), 이 React의 구조에서는 이런 부분이 캐싱이되면 실제로 기대하는대로 동작할 수 있겠다!&quot;로 확장되는 경험을 했습니다. (적고나니 무슨말인가 싶긴하네요..)</p>
</li>
<li>
<p>생각나면 추가하겠습니다...</p>
</li>
</ol>
<h3 id="학습과-성장"><a class="anchor" aria-hidden="true" tabindex="-1" href="#학습과-성장"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>학습과 성장</h3>
<p>과제를 마친 지금 시점에서 생각해보면,,, 기대 이상의 학습과 경험이었습니다.</p>
<p>내가 무에서 유를 만든 것은 아니고, 이미 잘 만들어진 구조를 재건축해보는 일을 한 것일 뿐이지만..
그렇기에 명확한 큰 목표 아래서 굉장히 밀도있게 문제 해결을 해보고 그것을 잘 돌아가는 하나의 시스템으로 만들어내기 위해 다양한 고민과 경험을 해봤다는 느낌을 받습니다. 특히 심화 과제의 훅들을 만들고 테스트하는 과정에서 그전의 과정과 달리 빠른 시간안에 문제를 해결하고 테스트가 통과되는 경험을 했고, 이 경험이 &quot;내가 잘 만들어 냈구나!&quot; 라는 효능감이 폭발했던 시점이었습니다.</p>
<p>과제의 성공을 떠나서, 이번 경험을 통해 얻은 가장 큰 통찰은
<strong><em>&quot;React도, Component도, Virtual DOM도, Hook들도 결국에는 Magic이 아닌 문제해결의 결과물이구나&quot;</em></strong> 라는 생각이었습니다. 오랫동안 React나 Vue같은 도구 위에서 작업하다보니 굳어진 사고의 울타리가 깨지는 좋은 경험이었습니다.</p>
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 용태님!
이렇게 디테일한 학습 기록이라니..!! 너무 놀랍네요.
무엇보다 1주일동안 용태님께서 학습한 내용의 깊이가 인상적이에요</p>
<blockquote>
<p>특히 심화 과제의 훅들을 만들고 테스트하는 과정에서 그전의 과정과 달리 빠른 시간안에 문제를 해결하고 테스트가 통과되는 경험을 했고, 이 경험이 &quot;내가 잘 만들어 냈구나!&quot; 라는 효능감이 폭발했던 시점이었습니다.</p>
</blockquote>
<p>테스트 때 부터 쌓아온 경험이 여기서 잘 발휘되었던 것 같군요! 다행입니다 ㅎㅎ</p>
<blockquote>
<p>&quot;React도, Component도, Virtual DOM도, Hook들도 결국에는 Magic이 아닌 문제해결의 결과물이구나&quot; 라는 생각이었습니다. 오랫동안 React나 Vue같은 도구 위에서 작업하다보니 굳어진 사고의 울타리가 깨지는 좋은 경험이었습니다.</p>
</blockquote>
<p>맞아요. 그리고 이런 과정이 또 어떻게 보면 &quot;프론트엔드 개발자&quot;의 영역을 넓혀주는 과정이라는 생각을 많이 하는 편입니다. 문제해결의 대상이 UI에 대한 것이긴 하지만, 알고리즘이나 자료구조도 꽤 많이 알아야하고, 설계에 대한 고민도 굉장히 많이 필요해요.</p>
<p>이렇게 &quot;코어&quot;를 만드는 경험이 우리가 할 수 있는 일의 범위를 넓혀준다고 생각해요 ㅎㅎ</p>
<p>1주간 쉽지 않았을텐데 너무 고생 많았어요 용태님!!</p></div></div><div class="mt-9"></div></div></main></div></div></div>
    <title>[1팀 박용태] Chapter2-2. 나만의 React 만들기 - 박용태 | 항해플러스 프론트엔드 7기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 7기] 박용태님이 제출한 [1팀 박용태] Chapter2-2. 나만의 React 만들기 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 박용태, [1팀 박용태] Chapter2-2. 나만의 React 만들기, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[1팀 박용태] Chapter2-2. 나만의 React 만들기 - 박용태 | 항해플러스 프론트엔드 7기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 7기] 박용태님이 제출한 [1팀 박용태] Chapter2-2. 나만의 React 만들기 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[1팀 박용태] Chapter2-2. 나만의 React 만들기 - 박용태 | 항해플러스 프론트엔드 7기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 7기] 박용태님이 제출한 [1팀 박용태] Chapter2-2. 나만의 React 만들기 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  <!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_7th/favicon.ico"/>
  <!--app-head-->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_7th/assets/index-C-edMQf_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_7th/assets/index-B1cXSvNG.css">
</head>
<body>
<div id="root"><!--app-html--></div>
</body>
</html>
